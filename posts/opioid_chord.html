<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The Art of Machine Learning</title>
  <meta name="description" content="Machine Learning, Deep Learning, Jenny Yu ">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Opiod Epidemic">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://yinniyu.github.io/posts/taxi">
  <meta property="og:site_name" content="The Art of Machine Learning">
  <meta property="og:image" content="images/opioid_chord/opiod_chords.png">

 
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <link href="http://chalk.nielsenramon.com/feed.xml" type="application/rss+xml" rel="alternate" title="Chalk Last 10 blog posts" />

    <link rel="stylesheet" href="/assets/light.css">
<!-- D3.js -->
     <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
    <link type="text/css" rel="stylesheet" href="style.css">

     <script type="text/javascript" src="scripts/d3/math/trigonometry.js"></script>
     <script type="text/javascript" src="scripts/d3/svg/arc.js"></script>
     <script type="text/javascript" src="scripts/d3/core/functor.js"></script>
     <script type="text/javascript" src="scripts/d3/core/source.js"></script>
     <script type="text/javascript" src="scripts/d3/core/target.js"></script>
     <script type="text/javascript" src="scripts/d3/layout/arc-chord.js"></script>
     <script type="text/javascript" src="scripts/d3/svg/arc-chord.js"></script>
     <script type="text/javascript" src="scripts/graphic/gradients.js"></script>

 </head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav appear">
  <a href="/" class="header-logo" title="The Art of Machine Learning">The Art of Machine Learning</a>
  <ul class="header-links">
       <li>
        <a href="https://yinniyu.github.io/about">About Me
        </a>
      </li>
    
     <li>
        <a href="https://yinniyu.github.io/toolbox">My Toolbox</a>
      </li>
    
     <li>
        <a href="https://github.com/yinniyu" rel="noreferrer noopener" target="_blank" title="GitHub">
          <span class="icon icon-github"></span>
        </a>
      </li>
    
    
      <li>
        <a href="https://linkedin.com/in/jenny-yu-b495243" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <span class="icon icon-linkedin"></span>
        </a>
      </li>   
  </ul>
</nav>

        <article class="article appear">
          <header class="article-header">
            <h1 id="opioid viz">The opioid epidemic in pictures</h1>
            <p>During the past few years, there has been increasing media coverage of the opioid crisis in the U.S., especially focusing 
		    on synthetic variety such 
		  as fentanyl. The CDC estimates that the potency of the synthetic opioid is about 50-100 times as much as morphine, 
		  and it has been a lucrative merchandise for the cartel, leading up to the biggest <a href='https://www.denverpost.com/2019/01/31/u-s-border-biggest-ever-fentanyl-bust/'>
		    fentanyl bust </a> recently at the
		    Arizona order. </p>
		  <p>I came across some opioid datasets from the <i> Henry J Kaiser Family Foundation </i> 
			  website, and using these data
		  I wanted to examine the potential relationship betwee opioid death rate and economic downturn (i.e, unemployment rate)
		  for each state. Furthermore, the interactive line plot shows that every state has its own trends of deaths from 
			  different opioid types.</p>
            
            <div class="article-list-footer">
              <span class="article-list-date">
                February, 2018
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
              5 minute read
              </span>
              
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                <span class="article-list-divider">D3, interactive visualization, opioid epidemic </span>
              </div>
            </div>
          </header>

          <div class="article-content">

<div id="chart">
<h2 id="chord plot">Opioid death and Unemployment </h1>
	<p>The animated chord diagram below is composed from data from 2010-2017, and it's based on an example I found from 
		the <a href='https://github.com/d3/d3/wiki/Gallery'>D3 gallery page </a>. I've made changes to it to accomodate my dataset and structure.
		The top chords display the ranking of death rate in each state
		as number of deaths 
		per 100,000 with age adjustment, while the bottom chords correspond to the ranking of unemployment rate. The figure only shows the 
		top 25 states.
       <div id="mainDiv">
         <div id="imgDiv" style="width:400px; margin:0px auto; margin-top:10px">
             <img id="playPause" src="images/pause_bw.png" width="24" height="24" style="float:left"/>
             <div style="float:left; margin-top:4px; margin-left:4px">click on a bottom timeline year to skip to that point.</div>
         </div>

         <div id="svgDiv" style="font-size:10px; width:650px; height: 800px;"></div>


     </div>
         <div id="toolTip" class="tooltip" style="opacity:0; width:200px; height:90px; position:absolute;">
             <div id="header1" class="header3"></div>
             <div class="header-rule"></div>
             <div id="head" class="header"></div>
             <div class="header-rule"></div>
             <div  id="header2" class="header2"></div>
             <div  class="tooltipTail"></div>
         </div>

     </div>

     <script type="text/javascript" src="scripts/graphic/globals.js"></script>
     <script type="text/javascript" src="scripts/graphic/initialize.js"></script>
     <script type="text/javascript" src="scripts/graphic/events.js"></script>
     <script type="text/javascript" src="scripts/graphic/data.js"></script>
     <script type="text/javascript" src="scripts/graphic/buildChords.js"></script>
     <script type="text/javascript" src="scripts/graphic/update.js"></script>

     <script type="text/javascript">

         initialize();

         fetchData();

         function run() {
             if (year < statesGrouped.length-1) year++; else{
               year=0;
             }
             if (year==maxYear){
               year=0;
             }

             else {
                 update(year);
             }
         }
      

     </script>

    <p align='center'>Fig.1. Animated chord diagram for opioid death rate (age-adjusted) and unemployment rate.</p>
      
<p>I also created an interactive scatter line plot for the different opioid deaths by the number. Some states had too many 
	missing values especially early on, so I selected states with complete data from 2010-2017 and that returned 33 states. </p>
<figure>
   <img src="images/opioid_chord/chrome-type_capture.gif" alt="screen capture" >
   <figcaption>Fig.2. Scatter line plot of opioid deaths from 2010-2017 in each state. 
   </figcaption>
</figure>
	
	<p>For clarity, 
	this plot is displayed 
 <a href='https://yinniyu.github.io/posts/type_v4.html'>here </a>. </p>
		  

<p>I found that the fastest way to hack D3 is by looking at well-annotated codes (I love the ones written by <a href='https://www.visualcinnamon.com/about'>
	Nadieh Bremer </a>) AND using <a href='http://jsfiddle.net/wQXCL/2782/'> JSFiddle interactive tool </a> to test out different javascript and see its effect.
	
<h4 id="reference">REFERENCE</h4>
<p>[1] https://medium.com/@Marianattestad/a-treatise-on-making-circos-plots-from-genomic-data-7ff496849e0</p>
<p>[2] <b>How to create a Flow diagram with a circular Twist</b>, Visual Cinnamon, https://www.visualcinnamon.com/2015/08/stretched-chord.html</p>
		  <p>[3] <i>Andrew's Chord Example </i> http://bl.ocks.org/AndrewRP/7468330 </p>
        

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://chalk-1.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer appear">
  <p>
    Chalk is a high quality, completely customizable, performant and 100% free
    blog template for Jekyll built by
    <a href="/about" title="About me">Nielsen Ramon</a>. Download it <a href="https://github.com/nielsenramon/chalk" rel="noreferrer noopener" target="_blank" title="Download Chalk">here</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  
  <script>
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-28631876-6','auto');ga('send','pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script>


<script src="/assets/vendor.js"></script>



  <script src="/assets/webfonts.js"></script>




  <script src="/assets/scrollappear.js"></script>



<script src="/assets/application.js"></script>

</body>
</html>
